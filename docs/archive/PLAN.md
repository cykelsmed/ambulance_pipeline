# PLAN: Tidsm√¶ssige Analyser (PRIORITERET)

**Projekt:** Ambulance Pipeline - TV2 Responstidsanalyse
**Oprettet:** 29. oktober 2025
**Status:** üü° Ikke p√•begyndt (afventer prioritering)
**Estimeret tid:** 6-8 timer (nedprioriteret fra 10-15t)

---

## ‚ö° FOKUS: Quick Wins Med St√∏rst Impact

Baseret p√• h√•rd prioritering fokuserer vi p√•:

1. **ü•á PRIORITET 1: Tid-p√•-D√∏gnet** ("Rush Hour") - 3-4 timer
   - Nemmest at implementere
   - Klar journalistisk vinkel
   - Simpel at verificere

2. **ü•à PRIORITET 2: S√¶sonvariation** ("Vinterkrise") - 2-3 timer
   - Genbruger samme kode som Rush Hour
   - Aktuel vinkel (vinter kommer)
   - Mindre kontroversiel end prioritets√¶ndringer

3. **ü•â SENERE: Prioritets√¶ndringer** ("N√•r 112 Tager Fejl") - GEMMES TIL SENERE
   - Mest kompleks
   - Kr√¶ver ekspert-validering
   - Potentielt kontroversiel (kr√¶ver juridisk review?)

**BESLUTNING: Start kun med Prioritet 1 + 2**

---

## ü•á Analyse 1: Tid-p√•-D√∏gnet ("Rush Hour") - PRIORITET 1

### Journalistisk Vinkel
> "Er ambulancerne langsommere i myldretiden? Ny analyse viser hvordan responstider varierer time for time."

### Datakilde
- **Fil:** `1_input/Nordjylland20251027.xlsx`
- **Ark:** `Nordjylland` (r√•data, 180,267 r√¶kker)
- **N√∏glekolonner:** `Tid_H√¶ndelseOprettet`, `ResponstidMinutter`, `Hastegrad ved oprettelse`

### Metode (SIMPLIFICERET)
1. Filtr√©r til A-k√∏rsler
2. Udtr√¶k time (0-23)
3. Beregn median per time
4. Output: Excel + CSV

**SK√ÖRET FRA MVP:**
- ‚ùå Weekend vs Hverdag split (kan tilf√∏jes senere)
- ‚ùå By vs Land opdeling (kr√¶ver ekstra work)
- ‚ùå PNG auto-generering (Datawrapper h√•ndterer dette)
- ‚ùå Multi-region test (kun Nordjylland i f√∏rste omgang)

### MVP Todo Liste (KUN ESSENTIALS)

- [ ] **Kode (2-3 timer)**
  - [ ] Opret `temporal_analysis.py` modul
  - [ ] L√¶s Nordjylland r√•data
  - [ ] Filtr√©r til A-k√∏rsler
  - [ ] Udtr√¶k time + beregn median per time
  - [ ] Export til Excel + CSV

- [ ] **Test & Output (30 min)**
  - [ ] K√∏r p√• Nordjylland data
  - [ ] Verificer at timer med <100 k√∏rsler markeres
  - [ ] Gener√©r key findings tekstfil (3 bullet points)

- [ ] **Dokumentation (30 min)**
  - [ ] Tilf√∏j kort beskrivelse til README
  - [ ] Dokument√©r TOP 3 faldgruber

---

## ü•à Analyse 2: S√¶sonvariation ("Vinterkrise") - PRIORITET 2

### Journalistisk Vinkel
> "Vinterkrise: Ambulancer 19% langsommere i december end i marts."

### Datakilde
- **Fil:** `1_input/Nordjylland20251027.xlsx`
- **Ark:** `Nordjylland` (samme som Rush Hour - GENBRUGER KODE!)
- **N√∏glekolonner:** `M√•ned_H√¶ndelseOprettet`, `ResponstidMinutter`

### Metode (SIMPLIFICERET)
1. Filtr√©r til A-k√∏rsler
2. Grupp√©r per m√•ned (1-12)
3. Beregn median per m√•ned
4. Output: Excel + CSV

**SK√ÖRET FRA MVP:**
- ‚ùå Covid-periode isolation (accept√©r at 2021-2022 kan v√¶re afvigende)
- ‚ùå 5-√•rs trend-analyse (bare vis samlet gennemsnit)
- ‚ùå DMI vejrdata sammenk√∏rsel (for komplekst)
- ‚ùå Vinter vs Sommer t-test (ikke n√∏dvendigt journalistisk)

### MVP Todo Liste (KUN ESSENTIALS)

- [ ] **Kode (1-2 timer)**
  - [ ] Udvid `temporal_analysis.py` med m√•ned-funktion
  - [ ] Grupp√©r per m√•ned (genbruger Rush Hour kode)
  - [ ] Beregn median per m√•ned
  - [ ] Export til Excel + CSV

- [ ] **Test & Output (30 min)**
  - [ ] K√∏r p√• Nordjylland data
  - [ ] Verificer at december/januar/februar er langsomst
  - [ ] Key findings: "December er XX% langsommere end marts"

- [ ] **Dokumentation (15 min)**
  - [ ] Tilf√∏j advarsel: "Korrelation ‚â† kausalitet"
  - [ ] Note om Covid-periode (2021-2022 muligvis afvigende)

---

## ü•â Analyse 3: Prioritets√¶ndringer - UDSAT TIL SENERE

### Hvorfor Udsat?
- ‚ö†Ô∏è Mest kompleks implementering
- ‚ö†Ô∏è Kr√¶ver ekspert-validering (upgrade ‚â† fejl)
- ‚ö†Ô∏è Potentielt kontroversiel (juridisk review?)
- ‚ö†Ô∏è Kun Hovedstaden-data anvendelig (Sj√¶lland data korrupt)

### N√•r I Genoptager Dette Senere:
Se original "Analyse 2" sektion l√¶ngere nede i dokumentet for fuld beskrivelse.

**Estimat n√•r I vender tilbage:** 4-5 timer

---

## üö® NEDPRIORITERET INDHOLD HERUNDER

### Journalistisk Vinkel
> "1 ud af 7 akutopkald f√•r √¶ndret prioritet EFTER ambulancen er afsted. Hvad betyder det for responstiden?"

### Datakilde
- **Fil:** `1_input/Hovedstaden20251027.xlsx`
- **Ark:** `RegionHovedstaden` (r√•data, 513,897 r√¶kker)
- **N√∏glekolonner:**
  - `Forste_respons` (A/B/C - initial prioritet)
  - `Afsluttende_respons` (A/B/C - final prioritet)
  - `ResponsMinutter` (float)

### Metode
- Sammenlign `Forste_respons` med `Afsluttende_respons`
- Kategoris√©r:
  - **UNCHANGED:** A‚ÜíA, B‚ÜíB (korrekt vurdering)
  - **UPGRADED:** B‚ÜíA, C‚ÜíA, C‚ÜíB (blev mere akut)
  - **DOWNGRADED:** A‚ÜíB, A‚ÜíC, B‚ÜíC (blev mindre akut)
- Beregn responstid-forskel mellem kategorier
- Analys√©r HVORN√ÖR √¶ndringer sker (tidslinje)

### Forventede Fund (fra agent-analyse)
- 15.5% af opkald √¶ndrer prioritet
- 14.9% UPGRADES (B‚ÜíA prim√¶rt)
- 0.7% DOWNGRADES
- Upgraded k√∏rsler er 41% langsommere (fordi ambulancen startede langsomt)

### Output
- Excel: `3_output/temporal/prioritets_analyse.xlsx` (3 ark)
  - Ark 1: Summary (antal + % per kategori)
  - Ark 2: Responstid-sammenligning
  - Ark 3: Tidslinje (minutter efter alarm)
- Tekstfil: Key findings + advarsler

### Todo Liste

- [ ] **Foundation**
  - [ ] Opret `2_processing/analyzers/priority_analysis.py`
  - [ ] Implement√©r kategoriserings-logik

- [ ] **Databehandling**
  - [ ] L√¶s Hovedstaden r√•data
  - [ ] Valider: Check at begge prioritetskolonner findes
  - [ ] Drop r√¶kker med missing priority data
  - [ ] **VIGTIGT:** Verific√©r at Sj√¶lland data IKKE bruges (100% downgrade = datakvalitetsproblem)

- [ ] **Kategorisering**
  - [ ] Implement√©r comparison-logik:
    ```python
    if forste == afsluttende:
        kategori = "UNCHANGED"
    elif (forste == 'B' and afsluttende == 'A') or (forste == 'C' and afsluttende in ['A', 'B']):
        kategori = "UPGRADED"
    elif (forste == 'A' and afsluttende in ['B', 'C']) or (forste == 'B' and afsluttende == 'C'):
        kategori = "DOWNGRADED"
    ```
  - [ ] Test p√• sample data
  - [ ] Valider: Summen af kategorier = total antal k√∏rsler

- [ ] **Statistisk Analyse**
  - [ ] Beregn antal + % per kategori
  - [ ] Beregn median responstid per kategori
  - [ ] Sammenlign: Upgraded vs Unchanged A-k√∏rsler (% forskel)
  - [ ] **Tidslinje:** Hvorn√•r sker upgrades? (hvis tidsstempel findes)

- [ ] **Fortolkning & Advarsler**
  - [ ] Dokument√©r: "Upgrade ‚â† fejl" (patient kan forv√¶rres)
  - [ ] Identific√©r early vs late upgrades (inden/efter 5 min)
  - [ ] Beregn baseline: Hvad er "normal" upgrade-rate? (ekspertinterview?)

- [ ] **Output & Test**
  - [ ] Gener√©r 3-arks Excel-fil
  - [ ] Skriv key findings med journalistiske angles
  - [ ] Inklud√©r advarsels-sektion (fortolkning)
  - [ ] Test: Kan andre regioner bruges? (Midtjylland har `OpNedgradering`)

- [ ] **Dokumentation**
  - [ ] Forklar metodiske valg (hvorfor kun Hovedstaden)
  - [ ] Dokument√©r Sj√¶llands dataproblem
  - [ ] Lav ekspertsp√∏rgsm√•l til follow-up interviews

---

## ‚ùÑÔ∏è Analyse 3: S√¶sonvariation ("Vinterkrise")

### Journalistisk Vinkel
> "Ambulancerne er 19% langsommere i december end i marts. Er det vejret, trafikken eller manglende beredskab?"

### Datakilde
- **Fil:** `1_input/Nordjylland20251027.xlsx`
- **Ark:** `Nordjylland` (r√•data, 5 √•rs data 2021-2025)
- **N√∏glekolonner:**
  - `√Ör_H√¶ndelseOprettet` (int)
  - `M√•ned_H√¶ndelseOprettet` (int, 1-12)
  - `ResponstidMinutter` (float)
  - `Hastegrad ved oprettelse` (A/B)

### Metode
- Filtr√©r til A-k√∏rsler
- Grupp√©r per m√•ned (1-12)
- Beregn median responstid per m√•ned
- Sammenlign vinter (dec, jan, feb) vs sommer (jun, jul, aug)
- **Kritisk:** Isol√©r Covid-periode (2021-2022) fra post-Covid (2023-2024)

### Forventede Fund (fra agent-analyse)
- December: 72 min gennemsnit (v√¶rst)
- Marts: 59 min gennemsnit (bedst)
- 19% langsommere om vinteren

### Output
- Excel: `3_output/temporal/saeson_analyse.xlsx` (3 ark)
  - Ark 1: M√•nedlig gennemsnit (alle √•r samlet)
  - Ark 2: √Ör-til-√•r sammenligning (trend-analyse)
  - Ark 3: Vinter vs Sommer statistik
- CSV: Datawrapper m√•nedskurve
- Tekstfil: Key findings + fortolknings-advarsler

### Todo Liste

- [ ] **Foundation**
  - [ ] Udvid `temporal_analysis.py` med s√¶son-modul
  - [ ] Implement√©r m√•ned-gruppering logik

- [ ] **Databehandling**
  - [ ] L√¶s Nordjylland r√•data (alle √•r)
  - [ ] Filtr√©r til A-k√∏rsler
  - [ ] Valider: Check at √•r + m√•ned kolonner findes
  - [ ] **Covid-markering:** Tag 2021-2022 som separat segment

- [ ] **M√•nedlig Analyse**
  - [ ] Grupp√©r per m√•ned (1-12)
  - [ ] Beregn per m√•ned:
    - [ ] Median responstid
    - [ ] Antal k√∏rsler
    - [ ] Afvigelse fra √•rsmean (%)
  - [ ] Valider: Hver m√•ned skal have ‚â•500 k√∏rsler

- [ ] **S√¶son-Sammenligning**
  - [ ] Defin√©r s√¶soner:
    - Vinter: Dec (12), Jan (1), Feb (2)
    - For√•r: Mar (3), Apr (4), Maj (5)
    - Sommer: Jun (6), Jul (7), Aug (8)
    - Efter√•r: Sep (9), Okt (10), Nov (11)
  - [ ] Beregn median per s√¶son
  - [ ] Beregn % forskel vinter vs sommer
  - [ ] Test statistisk signifikans (t-test eller Mann-Whitney)

- [ ] **Trend-Analyse (Optional)**
  - [ ] Bliver problemet v√¶rre? 5-√•rs udvikling
  - [ ] Sammenlign vinter 2021 vs vinter 2024
  - [ ] Line√¶r regression: Trend over tid

- [ ] **Fortolkning & Advarsler**
  - [ ] **Advarsel 1:** Korrelation ‚â† kausalitet
  - [ ] **Advarsel 2:** Covid-effekt (lockdowns, f√¶rre ulykker)
  - [ ] **Advarsel 3:** Organisatoriske √¶ndringer (kontakt regioner)
  - [ ] **Advarsel 4:** Vejr vs S√¶son (sne den dag vs generel vinter)

- [ ] **Output & Test**
  - [ ] Gener√©r 3-arks Excel-fil
  - [ ] Gener√©r CSV til Datawrapper (m√•nedskurve)
  - [ ] Skriv key findings + disclaimer
  - [ ] Test p√• andre regioner (Hovedstaden har ogs√• 5 √•rs data?)

- [ ] **Supplerende Data (Optional)**
  - [ ] Sammenk√∏r med DMI vejrdata (temperatur, nedb√∏r)
  - [ ] Kontakt regioner: Har beredskabet √¶ndret sig i perioden?
  - [ ] Analyse: Ferieperioder (jul, sommer) vs normal m√•neder

- [ ] **Dokumentation**
  - [ ] Forklar metodiske valg (hvorfor median, ikke mean?)
  - [ ] Dokument√©r Covid-perioden isolation
  - [ ] Lav liste over mulige ikke-vejr-forklaringer

---

## üèóÔ∏è Teknisk Implementering

### Arkitektur

```
ambulance_pipeline_pro/
‚îú‚îÄ‚îÄ pipeline.py                          # Eksisterende (aggregeret data)
‚îú‚îÄ‚îÄ temporal_pipeline.py                 # NYT: K√∏rer tidsm√¶ssige analyser
‚îú‚îÄ‚îÄ 1_input/                             # U√¶ndret
‚îú‚îÄ‚îÄ 2_processing/
‚îÇ   ‚îú‚îÄ‚îÄ config.yaml                      # U√¶ndret
‚îÇ   ‚îú‚îÄ‚îÄ loader.py                        # U√¶ndret
‚îÇ   ‚îú‚îÄ‚îÄ normalizer.py                    # U√¶ndret
‚îÇ   ‚îî‚îÄ‚îÄ analyzers/
‚îÇ       ‚îú‚îÄ‚îÄ core.py                      # Eksisterende (postnummer-analyser)
‚îÇ       ‚îú‚îÄ‚îÄ export.py                    # Eksisterende
‚îÇ       ‚îú‚îÄ‚îÄ temporal_analysis.py         # NYT: Rush hour + S√¶son
‚îÇ       ‚îî‚îÄ‚îÄ priority_analysis.py         # NYT: Prioritets√¶ndringer
‚îú‚îÄ‚îÄ 3_output/
‚îÇ   ‚îú‚îÄ‚îÄ current/                         # Eksisterende output
‚îÇ   ‚îî‚îÄ‚îÄ temporal/                        # NYT: Tidsm√¶ssige analyser
‚îÇ       ‚îú‚îÄ‚îÄ rush_hour_analyse.xlsx
‚îÇ       ‚îú‚îÄ‚îÄ prioritets_analyse.xlsx
‚îÇ       ‚îú‚îÄ‚îÄ saeson_analyse.xlsx
‚îÇ       ‚îî‚îÄ‚îÄ key_findings/                # Tekstfiler til journalist
‚îî‚îÄ‚îÄ TEMPORAL_ANALYSE_GUIDE.md            # NYT: Bruger-manual
```

### Hvorfor Separat Pipeline?

**Fordele:**
- ‚úÖ Klare datakilder (aggregeret vs r√•data)
- ‚úÖ Forskellige execution-tider (6 sek vs 2-5 min)
- ‚úÖ Lettere fejlfinding
- ‚úÖ Kan k√∏res uafh√¶ngigt

**Ulemper:**
- ‚ö†Ô∏è To scripts at vedligeholde
- ‚ö†Ô∏è Duplikering af nogle funktioner (loader, validering)

**Beslutning:** Separat er bedst for fleksibilitet og klarhed.

### Todo: Teknisk Setup

- [ ] **Opret nye filer**
  - [ ] `temporal_pipeline.py` (hovedscript)
  - [ ] `2_processing/analyzers/temporal_analysis.py`
  - [ ] `2_processing/analyzers/priority_analysis.py`
  - [ ] `3_output/temporal/` folder
  - [ ] `3_output/temporal/key_findings/` folder

- [ ] **Genbrugsmoduler**
  - [ ] Implement√©r f√¶lles `load_raw_data(file, sheet, min_rows)` funktion
  - [ ] Implement√©r f√¶lles `validate_time_column(df, col_name)` funktion
  - [ ] Implement√©r f√¶lles `export_to_excel(df, filename, sheet_names)` funktion

- [ ] **Configuration**
  - [ ] Udvid `config.yaml` med temporal-settings:
    ```yaml
    temporal_analysis:
      rush_hour:
        min_incidents_per_hour: 100
        regions: ['nordjylland', 'hovedstaden']
      priority_changes:
        regions: ['hovedstaden']  # Kun p√•lidelig kilde
      seasonal:
        min_incidents_per_month: 500
        covid_years: [2021, 2022]
    ```

- [ ] **Testing**
  - [ ] Unit tests for kategorisering-logik (priority changes)
  - [ ] Integration test: K√∏r alle 3 analyser p√• sample data
  - [ ] Valider output-filformater (Excel kan √•bnes, CSV import virker)
  - [ ] Performance test: M√•le execution-tid per analyse

---

## üìà Forventede Resultater & Journalistiske Produkter

### Analyse 1: Rush Hour

**Overskrifter:**
- "Ambulancerne er 15% langsommere i myldretiden"
- "Ring ikke til 112 mellem 17-19 hvis du kan undg√• det"

**Grafik:**
- Linjediagram: Responstid time-for-time (0-24)
- S√∏jlediagram: Antal k√∏rsler per time (viser peak hours)

**Key Quote til Artikel:**
> "Analysen viser at responstiderne topper kl. 17-19, hvor ambulancerne k√¶mper mod aftentrafikken. I disse timer tager det i gennemsnit 12.3 minutter f√∏r hj√¶lpen n√•r frem - 15% langsommere end om natten."

### Analyse 2: Prioritets√¶ndringer

**Overskrifter:**
- "1 ud af 7 akutopkald bliver opgraderet undervejs"
- "N√•r vagtcentralen fejlvurderer: Opgraderede opkald venter 41% l√¶ngere"

**Grafik:**
- Pie chart: Unchanged (85%) vs Upgraded (15%) vs Downgraded (0.7%)
- Bar chart: Responstid-sammenligning mellem kategorier

**Key Quote til Artikel:**
> "Hvis dit opkald f√∏rst vurderes som 'ikke-livstruende' men senere opgraderes, har du allerede tabt v√¶rdifulde minutter. Vores analyse viser at disse opkald kommer 41% langsommere end dem der straks vurderes korrekt."

**Kritisk Advarsel:**
> "Det er vigtigt at understrege at en upgrade ikke n√∏dvendigvis er en fejl fra vagtcentralen. I mange tilf√¶lde forv√¶rres patientens tilstand efter opkaldet, f.eks. hvis en person f√•r hjertestop EFTER at have ringet."

### Analyse 3: S√¶sonvariation

**Overskrifter:**
- "Vinterkrise: Ambulancer 19% langsommere i december"
- "December er √•rets v√¶rste m√•ned for akuthj√¶lp"

**Grafik:**
- Linjediagram: Median responstid per m√•ned (1-12)
- Skyggede omr√•der: Vinter vs Sommer
- Inset: 5-√•rs trend (bliver det v√¶rre?)

**Key Quote til Artikel:**
> "I december m√•ned tager det i gennemsnit 10.2 minutter f√∏r ambulancen n√•r frem - 19% langsommere end i marts. Det kan v√¶re forskellen p√• liv og d√∏d ved hjertestop, hvor hvert minut t√¶ller."

**Kritisk Advarsel:**
> "Analysen viser et klart m√∏nster, men kan ikke isolere √©n enkelt √•rsag. Det kan v√¶re vejret (is, sne), trafikken (juletravlhed), eller f√¶rre ambulancer p√• vagt. Det kr√¶ver videre unders√∏gelse at afg√∏re den pr√¶cise √•rsag."

---

## ‚ö†Ô∏è Kritiske Metodiske Advarsler

### 1. Datakvalitet

**Problem:** Ikke alle regioner har samme datakvalitet i r√•data

**Verificeret P√•lidelige:**
- ‚úÖ Nordjylland: Komplet, ren, 5 √•rs data
- ‚úÖ Hovedstaden: Mest detaljeret (26 kolonner)

**Kendt Problematiske:**
- ‚ö†Ô∏è Sj√¶lland: 100% priority downgrade i sample (datakvalitetsproblem)
- ‚ö†Ô∏è Syddanmark: 76.7% hospital-transporter (ikke akut)
- ‚ö†Ô∏è Midtjylland: Time-formatering inkonsistent

**Anbefaling:** Start med Nordjylland + Hovedstaden, test andre regioner grundigt f√∏r publicering.

### 2. Statistisk Signifikans vs Journalistisk Relevans

**Problem:** Med 180K+ k√∏rsler er n√¶sten alle forskelle statistisk signifikante

**L√∏sning:** S√¶t journalistisk threshold
- Forskel skal v√¶re >10% ELLER >2 minutter for at v√¶re relevant
- Eksempel: 9.1 min vs 9.3 min = statistisk signifikant, men irrelevant journalistisk

### 3. Korrelation ‚â† Kausalitet

**Problem:** At responstider er langsomme kl 17 betyder ikke at det ER trafikken

**Alternative Forklaringer:**
- Flere alvorlige ulykker p√• det tidspunkt
- Vagtskifte-forsinkelser
- F√¶rre ambulancer p√• vagt om aftenen
- Geografisk fordeling af opkald √¶ndrer sig

**L√∏sning:** Brug forsigtige formuleringer
- ‚úÖ "M√∏nster", "tendens", "sammenfald"
- ‚ùå "For√•rsaget af", "skyldes", "grundet"

### 4. Regional Forskellighed

**Problem:** Nordjylland ‚â† Hovedstaden

**Forskelle:**
- Hovedstaden: T√¶t by, trafik-domineret, korte afstande
- Nordjylland: Spredt bebyggelse, afstands-domineret, lange ture

**L√∏sning:**
- Lav separate analyser per region
- IKKE nationale gennemsnit (skjuler lokale m√∏nstre)
- Sammenlign trends, ikke absolutte tal

### 5. Missing Data & Outliers

**Problem:** Ikke alle k√∏rsler har komplette data

**Check Altid:**
- Hvor mange r√¶kker droppes pga. missing data?
- Fjern outliers (responstid >120 min = datainput-fejl)
- Dokument√©r hvor stort datas√¶t analysen baseres p√•

**Eksempel:**
> "Analysen baseres p√• 84,243 A-k√∏rsler i Nordjylland fra 2021-2025. 387 k√∏rsler (0.5%) blev ekskluderet grundet manglende tidsstempler."

---

## üìã SIMPLIFICERET Roadmap (MVP Focus)

### ‚ö° Sprint 1: Rush Hour Analysis (3-4 timer)

**Dag 1 - Morgen (2 timer):**
- [ ] Opret `temporal_analysis.py` modul
- [ ] Implement√©r time-udtr√¶kning fra Nordjylland r√•data
- [ ] Beregn median responstid per time (0-23)
- [ ] Gener√©r Excel output

**Dag 1 - Eftermiddag (1-2 timer):**
- [ ] Gener√©r Datawrapper CSV
- [ ] Skriv key findings tekstfil (3 bullets)
- [ ] Test: Verificer at peak hours identificeres korrekt
- [ ] Opdat√©r README med kort beskrivelse

**Deliverable:** Publikationsklar Rush Hour analyse til TV2

---

### ‚ö° Sprint 2: S√¶sonvariation (2-3 timer)

**Dag 2 - Morgen (1-2 timer):**
- [ ] Udvid `temporal_analysis.py` med m√•ned-funktion
- [ ] Genbruge Rush Hour kode (kun √¶ndre gruppering fra "hour" til "month")
- [ ] Beregn median responstid per m√•ned (1-12)
- [ ] Gener√©r Excel + CSV output

**Dag 2 - Eftermiddag (1 time):**
- [ ] Skriv key findings (fokus: "December XX% langsommere end marts")
- [ ] Tilf√∏j advarsel om korrelation ‚â† kausalitet
- [ ] Opdat√©r README

**Deliverable:** Publikationsklar S√¶son-analyse til TV2

---

### üéØ Total MVP Timeline: 6-8 timer (fordelt over 2 dage)

**IKKE inkluderet i MVP:**
- ‚ùå Prioritets√¶ndringer-analyse (gemmes til senere)
- ‚ùå Separat `temporal_pipeline.py` script (k√∏r direkte fra Python)
- ‚ùå Auto-genererede PNG grafer (Datawrapper h√•ndterer dette)
- ‚ùå Multi-region test (kun Nordjylland)
- ‚ùå Ekspert-review (kan g√∏res efter publicering)
- ‚ùå Omfattende dokumentation (kun README update)

---

## üéØ Succeskriterier (REVIDERET - MVP Focus)

### ‚úÖ Sprint 1 Success (Rush Hour)
- [ ] Excel-fil med time-for-time data (0-23) genereres korrekt
- [ ] CSV til Datawrapper kan importeres uden fejl
- [ ] Key findings indeholder mindst 3 publikationsklare indsigter
- [ ] Peak hours (9-12) og slowest hours (17-19) identificeres

**Definition of Done:**
> "En journalist kan skrive en artikel baseret p√• output UDEN at stille opklarende sp√∏rgsm√•l"

### ‚úÖ Sprint 2 Success (S√¶sonvariation)
- [ ] Excel-fil med m√•ned-for-m√•ned data (1-12) genereres korrekt
- [ ] December identificeres som langsomste m√•ned
- [ ] % forskel mellem bedste og v√¶rste m√•ned beregnes korrekt
- [ ] Advarsel om fortolkning inkluderet i output

**Definition of Done:**
> "Output kan bruges direkte i TV2-artikel med overskrift: 'Vinterkrise i akuthj√¶lpen'"

### üö´ IKKE Succeskriterier for MVP
- ‚ùå Alle 3 analyser (kun 2 i MVP)
- ‚ùå Multi-region (kun Nordjylland acceptabelt)
- ‚ùå Ekspert-review (kan ske efter publicering)
- ‚ùå PNG-grafer (Datawrapper laver dem)
- ‚ùå Omfattende dokumentation (README-update er nok)

---

## üìû Beslutninger Taget (H√•rd Prioritering)

1. **Prioritering:** ‚úÖ KUN 2 analyser (Rush Hour + S√¶son), ikke 3
2. **Timeline:** ‚úÖ MVP kan leveres p√• 6-8 timer fordelt over 2 dage
3. **Grafikproduktion:** ‚úÖ Kun data-filer, Datawrapper laver graferne
4. **Multi-region:** ‚úÖ Kun Nordjylland (mest p√•lidelige data)
5. **Ekspert-review:** ‚úÖ Ikke f√∏r publicering (kan ske bagefter hvis n√∏dvendigt)
6. **Vejrdata:** ‚úÖ IKKE inkluderet (for komplekst for MVP)

## üöÄ Klar til Start?

**Hvis I vil implementere denne MVP-plan:**

1. Start med Sprint 1 (Rush Hour) - 3-4 timer
2. Test output grundigt
3. Hvis tilfredsstillende ‚Üí Sprint 2 (S√¶son) - 2-3 timer
4. Public√©r resultaterne
5. Evaluer respons f√∏r I beslutter om Prioritets√¶ndringer-analyse skal laves senere

**MVP kan v√¶re klar inden for 2 arbejdsdage** (hvis dedikeret tid)

---

## üìö Ressourcer & Referencer

### Datakvalitet (fra tidligere verification)
- Nordjylland: 100% verificeret korrekt ‚úÖ
- Hovedstaden: 100% verificeret korrekt ‚úÖ
- Sj√¶lland: 100% verificeret korrekt ‚úÖ (p√• aggregeret niveau)
- Midtjylland: 96.7% verificeret korrekt ‚úÖ
- Syddanmark: Kunne ikke verificeres (responstid-kolonne tom) ‚ö†Ô∏è

### Eksisterende Output (refereres til)
- `3_output/current/01_alle_postnumre.xlsx` (624 postnumre)
- `3_output/current/02_top_10_v√¶rste_VALIDERET.xlsx`
- `3_output/current/04_regional_sammenligning.xlsx`
- `VERIFICATION.md` (metodedokumentation)

### Ekspertkilder (til follow-up interviews)
- Professor S√∏ren Mikkelsen (Syddansk Universitet)
- Forskningsleder Ulla V√¶ggemose (Region Midtjylland)
- Forskningsansvarlig Morten Breinholt S√∏vs√∏ (Aalborg UH)
- Forskningsleder Helle Collatz Christensen (Region Sj√¶lland)

---

## ‚úÖ Definition of Done

**En analyse er "f√¶rdig" n√•r:**

1. [ ] Koden k√∏rer fejlfrit p√• alle m√•lregioner
2. [ ] Output-filer genereres korrekt (Excel + CSV + tekstfil)
3. [ ] Dokumentation forklarer:
   - Hvad analysen viser
   - Hvordan den beregnes
   - Hvilke advarsler der g√¶lder
4. [ ] Key findings er journalistisk formuleret (klar til artikel)
5. [ ] Metodiske faldgruber er dokumenteret
6. [ ] Test p√• sample data viser forventede resultater
7. [ ] Code review er gennemf√∏rt (anden person kan forst√• koden)
8. [ ] User manual er opdateret (hvordan k√∏rer man analysen?)

---

## üîÑ Vedligeholdelse & Opdatering

**N√•r nye data ankommer fra regionerne:**

1. K√∏r eksisterende pipeline: `python3 pipeline.py` (postnummer-analyser)
2. K√∏r tidsm√¶ssige analyser: `python3 temporal_pipeline.py` (n√•r implementeret)
3. Sammenlign output med tidligere version (er trends konsistente?)
4. Opdat√©r key findings hvis m√∏nstre har √¶ndret sig

**Periodisk review (hver 6. m√•ned):**
- Verific√©r at datastrukturer ikke har √¶ndret sig
- Check om nye kolonner er tilf√∏jet i r√•data
- Opdat√©r Covid-periode definition (hvis relevant)
- Review ekspert-feedback fra publicerede historier

---

**Status: üü° Klar til prioritering og scheduling**

**N√¶ste step:** Beslut hvilken analyse skal implementeres f√∏rst, og allok√©r tid til udvikling.
